
// Layer: conv2d_4_0 - Conv2D with multiple inputs
@group(0) @binding(0) var conv2d_3_tex: texture_2d<f32>;
@group(0) @binding(1) var conv2d_4_tex: texture_storage_2d<rgba16float, write>;

fn max4(v: vec4f, val: f32) -> vec4f {
  return max(v, vec4f(val));
}

fn go_0(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(textureLoad(conv2d_3_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}
fn go_1(pos: vec2u, x_off: i32, y_off: i32) -> vec4f {
  return max4(-textureLoad(conv2d_3_tex, vec2i(i32(pos.x) + x_off, i32(pos.y) + y_off), 0), 0.0);
}
@compute
@workgroup_size(8, 8)
fn computeMain(@builtin(global_invocation_id) pixel: vec3u) {
  let dim_out: vec2u = textureDimensions(conv2d_4_tex);
  if (pixel.x >= dim_out.x || pixel.y >= dim_out.y) {
    return;
  }
  var result: vec4f = vec4f(0.0);

  // Output channels 0 to 3

  result += mat4x4<f32>(
    0.06925584, -0.13293377, -0.04197380, -0.04001923,
    -0.05777663, 0.03595338, -0.04856970, 0.04764019,
    -0.09130621, -0.11818429, -0.02238744, 0.08231726,
    -0.01144680, -0.03018765, -0.05419164, -0.11014126
  ) * go_0(pixel.xy, -1, -1);

  result += mat4x4<f32>(
    -0.01181420, -0.49167514, -0.04147644, 0.16309588,
    -0.03428874, -0.29683712, -0.02772491, -0.01654784,
    0.11657000, 0.05294701, 0.57917297, 0.14064972,
    0.10924799, -0.11008322, -0.11393350, -0.09378482
  ) * go_0(pixel.xy, -1, 0);

  result += mat4x4<f32>(
    -0.16204071, -0.00391018, 0.07131123, 0.08114837,
    -0.06234277, -0.22326143, 0.02794466, 0.04821080,
    0.09085688, -0.10634875, -0.30280969, 0.11853863,
    0.10599328, 0.06862353, 0.02044078, -0.03915939
  ) * go_0(pixel.xy, -1, 1);

  result += mat4x4<f32>(
    -0.03646783, -0.03880290, -0.00379240, -0.07996283,
    -0.13944884, 0.04304929, 0.03969287, 0.01687885,
    0.18020505, -0.08098031, -0.01021393, 0.23857497,
    -0.09357397, 0.06796402, -0.07326932, 0.44249183
  ) * go_0(pixel.xy, 0, -1);

  result += mat4x4<f32>(
    -0.03376237, -0.00212780, -0.07639449, -0.18283507,
    -0.46461400, 0.56839794, 0.00706850, -0.02185277,
    -0.32403085, -0.26840812, 0.02774437, 0.42179650,
    0.03503510, -0.28638259, 0.62796891, 0.28680646
  ) * go_0(pixel.xy, 0, 0);

  result += mat4x4<f32>(
    0.40662929, 0.15582898, -0.01162596, -0.08044243,
    -0.02221145, 0.20238115, -0.28267980, 0.08397239,
    -0.14108305, -0.01749023, -0.21803926, -0.06897759,
    -0.06523865, -0.12041394, -0.01572833, -0.03276248
  ) * go_0(pixel.xy, 0, 1);

  result += mat4x4<f32>(
    0.08861633, -0.08870027, -0.11987533, -0.07741182,
    -0.29929990, 0.25102845, 0.04302444, 0.31539723,
    0.11364462, 0.00373808, -0.02191987, -0.14469744,
    0.09567787, -0.04461695, -0.16053595, -0.21929313
  ) * go_0(pixel.xy, 1, -1);

  result += mat4x4<f32>(
    -0.00446093, 0.02020317, -0.03553723, -0.04266201,
    0.24233355, -0.05231809, 0.44821507, -0.03088407,
    -0.17880751, -0.09455661, -0.10522644, 0.16970466,
    -0.02430897, 0.12971115, -0.23155119, 0.05867203
  ) * go_0(pixel.xy, 1, 0);

  result += mat4x4<f32>(
    0.13006023, -0.01964788, 0.14170574, -0.28891489,
    -0.00125850, 0.02082138, -0.13613799, 0.01270853,
    -0.01526649, -0.06489196, -0.11335902, 0.23572221,
    -0.11199920, 0.05670196, 0.01326625, 0.08182042
  ) * go_0(pixel.xy, 1, 1);

  result += mat4x4<f32>(
    0.31803209, 0.05754311, 0.05082664, -0.19345963,
    0.04697096, 0.12990920, 0.07171243, -0.03365954,
    0.16590858, 0.01465102, 0.08742754, -0.04370598,
    0.06395122, -0.14584401, -0.00711691, 0.08170465
  ) * go_0(pixel.xy, -1, -1);

  result += mat4x4<f32>(
    0.34878305, 0.14735703, -0.17826831, -0.53110790,
    -0.01689041, 0.18722066, -0.28480148, -0.01372963,
    -0.11858605, -0.24727848, -0.28081533, -0.10830510,
    0.00819275, 0.09815926, 0.04379478, 0.11025950
  ) * go_0(pixel.xy, -1, 0);

  result += mat4x4<f32>(
    0.27678165, -0.09964912, -0.16586550, -0.15807609,
    -0.15145679, -0.07295878, 0.10145429, -0.07414302,
    -0.06561562, -0.02200856, 0.32468981, -0.07099740,
    0.00147131, 0.03991503, 0.04103798, -0.00099244
  ) * go_0(pixel.xy, -1, 1);

  result += mat4x4<f32>(
    0.29093772, 0.01020697, 0.01649868, -0.30678108,
    0.02950975, 0.28140342, -0.20304868, 0.00192714,
    0.03255763, -0.01042254, 0.03044245, -0.10274767,
    0.15729652, -0.09468217, 0.21847054, 0.02209207
  ) * go_0(pixel.xy, 0, -1);

  result += mat4x4<f32>(
    0.02813014, 0.05860325, -0.04755232, -0.53177261,
    0.34380260, -0.63066387, 0.14211240, 0.04467305,
    -0.31793794, 0.04987963, 0.12816091, -0.16638519,
    0.09001750, -0.18279472, -0.07730587, -0.28226066
  ) * go_0(pixel.xy, 0, 0);

  result += mat4x4<f32>(
    -0.07306121, 0.00922268, -0.27188307, -0.20041563,
    0.13142355, -0.06192975, 0.23484142, -0.10806528,
    0.03535913, -0.09217690, 0.10106982, 0.20278396,
    0.06450438, -0.01228185, 0.17931229, 0.09927545
  ) * go_0(pixel.xy, 0, 1);

  result += mat4x4<f32>(
    0.03643218, 0.02167855, 0.08032548, -0.14586760,
    0.17761455, -0.14923801, -0.09350035, -0.38434315,
    -0.03036240, -0.01635630, 0.04868230, 0.03184200,
    -0.00168000, 0.05000182, 0.04038691, 0.22743773
  ) * go_0(pixel.xy, 1, -1);

  result += mat4x4<f32>(
    0.08726856, -0.01825667, -0.02738791, -0.26444227,
    -0.08647817, 0.29836023, -0.42574081, -0.44571072,
    0.10862780, 0.00621996, -0.03229656, -0.09308448,
    -0.19924743, -0.18374181, 0.38234848, 0.26632866
  ) * go_0(pixel.xy, 1, 0);

  result += mat4x4<f32>(
    0.15309064, -0.05664150, -0.19839360, 0.00028145,
    0.08180570, 0.19317478, 0.01314249, 0.00457685,
    0.14320736, -0.00902840, -0.05855651, -0.19170427,
    0.05026604, -0.07188697, 0.06187877, -0.02265832
  ) * go_0(pixel.xy, 1, 1);

  result += mat4x4<f32>(
    0.06925584, -0.13293377, -0.04197380, -0.04001923,
    -0.05777663, 0.03595338, -0.04856970, 0.04764019,
    -0.09130621, -0.11818429, -0.02238744, 0.08231726,
    -0.01144680, -0.03018765, -0.05419164, -0.11014126
  ) * go_1(pixel.xy, -1, -1);

  result += mat4x4<f32>(
    -0.01181420, -0.49167514, -0.04147644, 0.16309588,
    -0.03428874, -0.29683712, -0.02772491, -0.01654784,
    0.11657000, 0.05294701, 0.57917297, 0.14064972,
    0.10924799, -0.11008322, -0.11393350, -0.09378482
  ) * go_1(pixel.xy, -1, 0);

  result += mat4x4<f32>(
    -0.16204071, -0.00391018, 0.07131123, 0.08114837,
    -0.06234277, -0.22326143, 0.02794466, 0.04821080,
    0.09085688, -0.10634875, -0.30280969, 0.11853863,
    0.10599328, 0.06862353, 0.02044078, -0.03915939
  ) * go_1(pixel.xy, -1, 1);

  result += mat4x4<f32>(
    -0.03646783, -0.03880290, -0.00379240, -0.07996283,
    -0.13944884, 0.04304929, 0.03969287, 0.01687885,
    0.18020505, -0.08098031, -0.01021393, 0.23857497,
    -0.09357397, 0.06796402, -0.07326932, 0.44249183
  ) * go_1(pixel.xy, 0, -1);

  result += mat4x4<f32>(
    -0.03376237, -0.00212780, -0.07639449, -0.18283507,
    -0.46461400, 0.56839794, 0.00706850, -0.02185277,
    -0.32403085, -0.26840812, 0.02774437, 0.42179650,
    0.03503510, -0.28638259, 0.62796891, 0.28680646
  ) * go_1(pixel.xy, 0, 0);

  result += mat4x4<f32>(
    0.40662929, 0.15582898, -0.01162596, -0.08044243,
    -0.02221145, 0.20238115, -0.28267980, 0.08397239,
    -0.14108305, -0.01749023, -0.21803926, -0.06897759,
    -0.06523865, -0.12041394, -0.01572833, -0.03276248
  ) * go_1(pixel.xy, 0, 1);

  result += mat4x4<f32>(
    0.08861633, -0.08870027, -0.11987533, -0.07741182,
    -0.29929990, 0.25102845, 0.04302444, 0.31539723,
    0.11364462, 0.00373808, -0.02191987, -0.14469744,
    0.09567787, -0.04461695, -0.16053595, -0.21929313
  ) * go_1(pixel.xy, 1, -1);

  result += mat4x4<f32>(
    -0.00446093, 0.02020317, -0.03553723, -0.04266201,
    0.24233355, -0.05231809, 0.44821507, -0.03088407,
    -0.17880751, -0.09455661, -0.10522644, 0.16970466,
    -0.02430897, 0.12971115, -0.23155119, 0.05867203
  ) * go_1(pixel.xy, 1, 0);

  result += mat4x4<f32>(
    0.13006023, -0.01964788, 0.14170574, -0.28891489,
    -0.00125850, 0.02082138, -0.13613799, 0.01270853,
    -0.01526649, -0.06489196, -0.11335902, 0.23572221,
    -0.11199920, 0.05670196, 0.01326625, 0.08182042
  ) * go_1(pixel.xy, 1, 1);

  result += mat4x4<f32>(
    0.31803209, 0.05754311, 0.05082664, -0.19345963,
    0.04697096, 0.12990920, 0.07171243, -0.03365954,
    0.16590858, 0.01465102, 0.08742754, -0.04370598,
    0.06395122, -0.14584401, -0.00711691, 0.08170465
  ) * go_1(pixel.xy, -1, -1);

  result += mat4x4<f32>(
    0.34878305, 0.14735703, -0.17826831, -0.53110790,
    -0.01689041, 0.18722066, -0.28480148, -0.01372963,
    -0.11858605, -0.24727848, -0.28081533, -0.10830510,
    0.00819275, 0.09815926, 0.04379478, 0.11025950
  ) * go_1(pixel.xy, -1, 0);

  result += mat4x4<f32>(
    0.27678165, -0.09964912, -0.16586550, -0.15807609,
    -0.15145679, -0.07295878, 0.10145429, -0.07414302,
    -0.06561562, -0.02200856, 0.32468981, -0.07099740,
    0.00147131, 0.03991503, 0.04103798, -0.00099244
  ) * go_1(pixel.xy, -1, 1);

  result += mat4x4<f32>(
    0.29093772, 0.01020697, 0.01649868, -0.30678108,
    0.02950975, 0.28140342, -0.20304868, 0.00192714,
    0.03255763, -0.01042254, 0.03044245, -0.10274767,
    0.15729652, -0.09468217, 0.21847054, 0.02209207
  ) * go_1(pixel.xy, 0, -1);

  result += mat4x4<f32>(
    0.02813014, 0.05860325, -0.04755232, -0.53177261,
    0.34380260, -0.63066387, 0.14211240, 0.04467305,
    -0.31793794, 0.04987963, 0.12816091, -0.16638519,
    0.09001750, -0.18279472, -0.07730587, -0.28226066
  ) * go_1(pixel.xy, 0, 0);

  result += mat4x4<f32>(
    -0.07306121, 0.00922268, -0.27188307, -0.20041563,
    0.13142355, -0.06192975, 0.23484142, -0.10806528,
    0.03535913, -0.09217690, 0.10106982, 0.20278396,
    0.06450438, -0.01228185, 0.17931229, 0.09927545
  ) * go_1(pixel.xy, 0, 1);

  result += mat4x4<f32>(
    0.03643218, 0.02167855, 0.08032548, -0.14586760,
    0.17761455, -0.14923801, -0.09350035, -0.38434315,
    -0.03036240, -0.01635630, 0.04868230, 0.03184200,
    -0.00168000, 0.05000182, 0.04038691, 0.22743773
  ) * go_1(pixel.xy, 1, -1);

  result += mat4x4<f32>(
    0.08726856, -0.01825667, -0.02738791, -0.26444227,
    -0.08647817, 0.29836023, -0.42574081, -0.44571072,
    0.10862780, 0.00621996, -0.03229656, -0.09308448,
    -0.19924743, -0.18374181, 0.38234848, 0.26632866
  ) * go_1(pixel.xy, 1, 0);

  result += mat4x4<f32>(
    0.15309064, -0.05664150, -0.19839360, 0.00028145,
    0.08180570, 0.19317478, 0.01314249, 0.00457685,
    0.14320736, -0.00902840, -0.05855651, -0.19170427,
    0.05026604, -0.07188697, 0.06187877, -0.02265832
  ) * go_1(pixel.xy, 1, 1);

  result += vec4f(0.09852404, -0.10758168, 0.03163904, -0.00428126);
  textureStore(conv2d_4_tex, pixel.xy, result);
}
